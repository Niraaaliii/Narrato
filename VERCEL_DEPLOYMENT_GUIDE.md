# üöÄ Narrato AI - Vercel Deployment Guide

## üìã Prerequisites

1.  **Vercel Account** - Sign up at [vercel.com](https://vercel.com)
2.  **GitHub Repository** - Ensure your project is pushed to GitHub.
3.  **API Keys** - You'll need:
    -   Google Gemini API key
    -   Deepgram API key
    -   OpenAI API key (optional, if you plan to use OpenAI models)

## üîß Deployment Steps

### 1. Import Your Project to Vercel

1.  Go to your Vercel Dashboard: [vercel.com/dashboard](https://vercel.com/dashboard)
2.  Click "Add New..." -> "Project".
3.  Select "Import Git Repository" and choose your Narrato AI GitHub repository.

### 2. Configure Project Settings

Vercel will automatically detect the `vercel.json` file in your root directory, which configures both your frontend and backend.

#### **Environment Variables**

1.  During the import process, or later in your project settings under "Settings" -> "Environment Variables", add the following:
    -   `GEMINI_API_KEY`: Your Google Gemini API key
    -   `DEEPGRAM_API_KEY`: Your Deepgram API key
    -   `OPENAI_API_KEY`: Your OpenAI API key (if applicable)

    **Important:** Ensure these are set for the "Production" and "Development" environments.

#### **Build & Output Settings**

Vercel will use the `vercel.json` file to determine the build commands and output directories for both your frontend and backend.

-   **Frontend (`frontend` directory):**
    -   **Framework Preset:** Create React App (or Vite, if detected)
    -   **Build Command:** `npm install && npm run build`
    -   **Output Directory:** `dist`
-   **Backend (`backend` directory):**
    -   **Root Directory:** `backend`
    -   **Build Command:** `npm install`
    -   **Output Directory:** `api` (This is where Vercel expects serverless functions)

### 3. Deploy

1.  After configuring environment variables, click "Deploy".
2.  Vercel will build and deploy both your frontend (static site) and backend (serverless function) based on the `vercel.json` configuration.

## üåê How it Works (Vercel Configuration)

The `vercel.json` file at the root of your project tells Vercel how to handle your monorepo structure:

-   **`projects`**: Defines the frontend and backend as separate projects within the monorepo, specifying their respective root directories, build commands, and output directories.
-   **`builds`**: Instructs Vercel to use `@vercel/node` for your `backend/index.js` (turning it into a serverless function) and `@vercel/static-build` for your frontend.
-   **`routes`**: Directs traffic:
    -   `/api/(.*)`: All requests starting with `/api/` are routed to your backend serverless function (`backend/index.js`).
    -   `/(.*)`: All other requests are routed to your frontend static files (`frontend/dist`).

## üéØ Post-Deployment Checklist

-   [ ] Frontend deployed successfully (check the URL provided by Vercel)
-   [ ] Backend API accessible (e.g., `your-vercel-app.vercel.app/api/narrate`)
-   [ ] API keys configured in Vercel environment variables
-   [ ] Test file upload functionality
-   [ ] Verify audio generation works
-   [ ] Check all audience types work

## üîß Troubleshooting

### Common Issues

1.  **"Function Timeout" or "Internal Server Error" (Backend)**
    -   Ensure `backend/index.js` exports the `app` instance (`module.exports = app;`).
    -   Check Vercel logs for detailed error messages.
    -   Verify API keys are correctly set in Vercel environment variables.
    -   Large files or long processing times might hit Vercel's serverless function limits (free tier has a 10-second execution limit). Consider optimizing or upgrading.

2.  **"Page Not Found" (Frontend)**
    -   Ensure `frontend/dist` is correctly generated by `npm run build`.
    -   Verify `staticPublishPath` in `vercel.json` is `dist`.

3.  **CORS Errors**
    -   The backend already has CORS configured. Ensure your frontend is calling `/api/narrate` (relative path) and not `http://localhost:3001/narrate`.

4.  **Build Failures**
    -   Check Vercel build logs for specific errors.
    -   Ensure all dependencies are listed in `package.json` for both `frontend` and `backend`.

## üîÑ Continuous Deployment

Vercel automatically deploys new changes on every push to your connected Git branch (e.g., `main`).

## üéâ Success!

Once deployed, your Narrato AI will be available at the URL provided by Vercel (e.g., `https://your-project-name.vercel.app`).

Happy presenting! üé§
